{
    "_id": "657085d01c5d0de6f55de729",
    "title": "Checkout",
    "name": "checkout",
    "path": "checkout",
    "type": "form",
    "display": "form",
    "tags": [ ],
    "access": [
      {
        "type": "create_own",
        "roles": [ ]
      },
      {
        "type": "create_all",
        "roles": [ ]
      },
      {
        "type": "read_own",
        "roles": [ ]
      },
      {
        "type": "read_all",
        "roles": [
          "651185882e5eae71be60b31b",
          "651185882e5eae71be60b31f",
          "651185882e5eae71be60b323"
        ]
      },
      {
        "type": "update_own",
        "roles": [ ]
      },
      {
        "type": "update_all",
        "roles": [ ]
      },
      {
        "type": "delete_own",
        "roles": [ ]
      },
      {
        "type": "delete_all",
        "roles": [ ]
      },
      {
        "type": "team_read",
        "roles": [ ]
      },
      {
        "type": "team_write",
        "roles": [ ]
      },
      {
        "type": "team_admin",
        "roles": [ ]
      }
    ],
    "submissionAccess": [
      {
        "type": "create_own",
        "roles": [ ]
      },
      {
        "type": "create_all",
        "roles": [ ]
      },
      {
        "type": "read_own",
        "roles": [ ]
      },
      {
        "type": "read_all",
        "roles": [ ]
      },
      {
        "type": "update_own",
        "roles": [ ]
      },
      {
        "type": "update_all",
        "roles": [ ]
      },
      {
        "type": "delete_own",
        "roles": [ ]
      },
      {
        "type": "delete_all",
        "roles": [ ]
      },
      {
        "type": "team_read",
        "roles": [ ]
      },
      {
        "type": "team_write",
        "roles": [ ]
      },
      {
        "type": "team_admin",
        "roles": [ ]
      }
    ],
    "owner": "650a5bfdb9ac8160c0968e59",
    "components": [
      {
        "label": "Products",
        "persistent": "client-only",
        "trigger": {
          "init": true,
          "server": false
        },
        "dataSrc": "url",
        "fetch": {
          "url": "https://form.local/sandbox/product/submission",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": ""
            }
          ],
          "mapFunction": "",
          "forwardHeaders": false,
          "authenticate": true
        },
        "allowCaching": true,
        "key": "products",
        "type": "datasource",
        "input": true,
        "tableView": false
      },
      {
        "label": "Tax Rate",
        "customDefaultValue": "value = 0.08;",
        "key": "taxRate",
        "type": "hidden",
        "input": true,
        "tableView": false
      },
      {
        "label": "Cart",
        "reorder": false,
        "addAnotherPosition": "bottom",
        "layoutFixed": false,
        "enableRowGroups": false,
        "initEmpty": false,
        "tableView": false,
        "defaultValue": [
          {
            "product": { }
          }
        ],
        "key": "cart",
        "type": "datagrid",
        "input": true,
        "components": [
          {
            "label": "Product",
            "widget": "choicesjs",
            "tableView": true,
            "dataSrc": "resource",
            "data": {
              "resource": "657085141c5d0de6f55de4b7"
            },
            "template": "<span>{{ item.data.name }}</span>",
            "key": "product",
            "type": "select",
            "input": true,
            "noRefreshOnScroll": false,
            "addResource": false,
            "reference": false
          },
          {
            "label": "Price",
            "applyMaskOn": "change",
            "mask": false,
            "spellcheck": true,
            "tableView": false,
            "currency": "USD",
            "inputFormat": "plain",
            "truncateMultipleSpaces": false,
            "calculateValue": "if (\n  data.products && \n  data.products.length && \n  row.product &&\n  row.product.data\n) {\n  var selected = row.product.data.sku;\n  data.products.forEach(function(product) {\n    if (product && product.data.sku === row.product.data.sku) {\n      value = product.data.price;\n    }\n  });\n}",
            "calculateServer": true,
            "key": "price",
            "type": "currency",
            "input": true,
            "delimiter": true
          },
          {
            "label": "Quantity",
            "applyMaskOn": "change",
            "mask": false,
            "tableView": false,
            "delimiter": false,
            "requireDecimal": false,
            "inputFormat": "plain",
            "truncateMultipleSpaces": false,
            "validate": {
              "min": 1,
              "max": 5
            },
            "key": "quantity",
            "type": "number",
            "input": true,
            "defaultValue": 1
          }
        ]
      },
      {
        "label": "Sub Total",
        "applyMaskOn": "change",
        "mask": false,
        "spellcheck": true,
        "tableView": false,
        "currency": "USD",
        "inputFormat": "plain",
        "truncateMultipleSpaces": false,
        "redrawOn": "cart",
        "calculateValue": "value = data.cart.reduce((acc, item) => {\n  if (!item.price) {\n    return acc;\n  }\n  return acc + (item.price * item.quantity);\n}, 0);",
        "key": "subtotal",
        "type": "currency",
        "input": true,
        "delimiter": true
      },
      {
        "label": "Has Taxes",
        "tableView": false,
        "key": "hasTaxes",
        "type": "checkbox",
        "input": true,
        "defaultValue": false
      },
      {
        "label": "Taxes",
        "applyMaskOn": "change",
        "mask": false,
        "spellcheck": true,
        "tableView": false,
        "currency": "USD",
        "inputFormat": "plain",
        "truncateMultipleSpaces": false,
        "calculateValue": "value = data.subtotal * data.taxRate;",
        "key": "taxes",
        "conditional": {
          "show": true,
          "conjunction": "all",
          "conditions": [
            {
              "component": "hasTaxes",
              "operator": "isEqual",
              "value": true
            }
          ]
        },
        "type": "currency",
        "input": true,
        "delimiter": true
      },
      {
        "label": "Total",
        "applyMaskOn": "change",
        "mask": false,
        "spellcheck": true,
        "tableView": false,
        "currency": "USD",
        "inputFormat": "plain",
        "truncateMultipleSpaces": false,
        "calculateValue": "value = data.subtotal;\nif (data.taxes) {\n  value += data.taxes;\n}",
        "key": "total",
        "type": "currency",
        "input": true,
        "delimiter": true
      },
      {
        "type": "button",
        "label": "Submit",
        "key": "submit",
        "disableOnInvalid": true,
        "input": true,
        "tableView": false
      }
    ],
    "settings": { },
    "properties": { },
    "project": "651185882e5eae71be60b314",
    "controller": "",
    "revisions": "",
    "submissionRevisions": "",
    "_vid": 0,
    "created": "2023-12-06T14:31:44.392Z",
    "modified": "2023-12-06T17:34:01.352Z",
    "machineName": "sandbox:checkout"
  }